<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        template="/uii/templatePG/templatePG.html"
        xmlns:composite="http://xmlns.jcp.org/jsf/composite"
        xmlns:intranda="http://xmlns.jcp.org/jsf/composite/compositesPG"
        xmlns:jsf="http://xmlns.jcp.org/jsf"
        xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:x="http://myfaces.apache.org/tomahawk"
>
    <style>
        .table tr.level-0 td {
            margin-left: 0;
        }

        .table tr.level-1, .table td.level-1 {
            margin-left: 20px;
        }

        .table tr.level-1 td {
            padding-left: 35px;
        }

        .table tr.level-2, .table td.level-2 {
            padding-left: 20px;
        }

        .table tr.level-2 td {
            padding-left: 45px;
        }

        .table tr.level-3, .table td.level-3 {
            padding-left: 30px;
        }

        .table tr.level-3 td {
            padding-left: 60px;
        }

        .table tr.level-4, .table td.level-4 {
            padding-left: 40px;
        }

        .table tr.level-4 td {
            padding-left: 75px;
        }

        .table tr.level-5, .table td.level-5 {
            padding-left: 50px;
        }

        .table tr.level-5 td {
            padding-left: 90px;
        }

        .table tr.level-6, .table td.level-6 {
            padding-left: 60px;
        }

        .table tr.level-6 td {
            padding-left: 105px
        }

        .table tr.level-7, .table td.level-7 {
            padding-left: 70px;
        }

        .table tr.level-7 td {
            padding-left: 120px
        }

        .table tr.level-8, .table td.level-8 {
            padding-left: 80px;
        }

        .table tr.level-8 td {
            padding-left: 135px
        }

        .table tr.level-9, .table td.level-9 {
            padding-left: 90px;
        }

        .table tr.level-9 td {
            padding-left: 150px
        }

        .table tr.level-10, .table td.level-10 {
            padding-left: 100px;
        }

        .table tr.level-10 td {
            padding-left: 165px
        }

    </style>

    <composite:interface>
        <composite:attribute
                name="vocabulary"
                type="io.goobi.vocabulary.exchange.Vocabulary"
                required="true"
        />
    </composite:interface>

    <composite:implementation>
        <intranda:box
            boxForm="false"
            boxPadding="true"
            boxType="neutral"
            boxTitle="false">
            <intranda:boxTitle
                    title="Test"
                    icon="fa-database">
                <div class="actions d-flex">
                    <!-- download all records as csv/excel -->
                    <!--                    <button-->
                    <!--                            jsf:id="downloadRecords"-->
                    <!--                            class="btn d-flex align-items-center btn&#45;&#45;title-action"-->
                    <!--                            jsf:rel="tooltip"-->
                    <!--                            jsf:action="#{vocabularyBean.downloadRecords}"-->
                    <!--                            title="#{msgs.vocabularyManager_downloadRecords}">-->
                    <!--                        <span class="fa fa-download"/>-->
                    <!--                        <f:passThroughAttribute-->
                    <!--                                name="data-toggle"-->
                    <!--                                value="tooltip"/>-->
                    <!--                        <f:passThroughAttribute-->
                    <!--                                name="aria-label"-->
                    <!--                                value="#{msgs.vocabularyManager_downloadRecords}"/>-->
                    <!--                    </button>-->

                    <!-- import all records from excel -->
                    <!--                    <button-->
                    <!--                            jsf:id="uploadRecords"-->
                    <!--                            class="btn d-flex align-items-center btn&#45;&#45;title-action"-->
                    <!--                            jsf:rel="tooltip"-->
                    <!--                            jsf:action="#{vocabularyBean.uploadRecords}"-->
                    <!--                            title="#{msgs.vocabularyManager_uploadRecords}">-->
                    <!--                        <span class="fa fa-upload"/>-->
                    <!--                        <f:passThroughAttribute-->
                    <!--                                name="data-toggle"-->
                    <!--                                value="tooltip"/>-->
                    <!--                        <f:passThroughAttribute-->
                    <!--                                name="aria-label"-->
                    <!--                                value="#{msgs.vocabularyManager_uploadRecords}"/>-->
                    <!--                    </button>-->
                </div>
                <!-- /actions -->
            </intranda:boxTitle>

            <!-- table of records -->
            <h:panelGroup layout="block" id="recordList" styleClass="box__body">
                <div class="gw-table">
                    <div class="gw-table gw-table__search">

                        <div class="gw-table__search__length">
                            <!-- TODO: Calculate the filtered result size -->
                            <h:outputText
                                    value="#{msgs.treffer}: #{vocabularyRecordsBean.paginator.totalResults}"
                            />
                            <!--                        <h:outputText-->
                            <!--                                rendered="#{vocabularyRecordsBean.paginator.searchParameter != null or vocabularyRecordsBean.paginator.searchParameter ne ''}"-->
                            <!--                                value=" #{msgs.von} #{vocabularyBean.paginator.totalResults}"/>-->
                        </div>

                        <div class="gw-table__filters">
                            <!-- Search box -->
                            <div class="gw-table__filters__search-bar">
                                <div class="input-group input-group">
                                    <span class="input-group-text">
                                        <span class="fa fa-search"/>
                                    </span>
                                    <h:inputText
                                            id="searchField"
                                            pt:aria-label="search"
                                            styleClass="form-control searchfield"
                                            value="#{vocabularyRecordsBean.paginator.searchParameter}">
                                        <f:passThroughAttribute
                                                name="placeholder"
                                                value="#{msgs.search}"/>
                                    </h:inputText>
                                    <button
                                            type="button"
                                            jsf:id="FilterAlle2"
                                            jsf:forceId="true"
                                            class="btn btn-blank"
                                            jsf:action="#{vocabularyRecordsBean.reload()}">
                                        <f:ajax render="@form" execute="@form"></f:ajax>
                                        #{msgs.search}
                                    </button>
                                </div>
                                <x:commandButton
                                        type="submit"
                                        id="FilterAlle"
                                        forceId="true"
                                        style="display: none;"
                                        action="#{vocabularyRecordsBean.reload()}">
                                    <f:ajax render="@form" execute="@form"></f:ajax>
                                </x:commandButton>
                            </div> <!-- /__search-bar -->
                        </div> <!-- /__filters -->
                    </div> <!-- /__search -->

                    <div class="gw-table">
                        <div class="gw-table__wrapper">

                            <table class="table table-hover table-bordered" role="grid">

                                <thead>
                                <tr role="row">
                                    <ui:repeat var="definition" value="#{vocabularyRecordsBean.titleFields}">
                                        <th scope="col" role="columnheader">
                                            <button
                                                    jsf:id="changeOrderLabel"
                                                    class="button-link"
                                                    style="width: 100%; text-align: left;"
                                                    jsf:action="#{vocabularyRecordsBean.reload()}">
                                                <h:outputText
                                                        value="#{definition.name}"/>
                                                <!--                                            value="#{definition.name} #{definition.language != '' ? msgs[definition.language] : ''}"/>-->

                                                <span class="pull-right table-sort-icon fa #{vocabularyRecordsBean.paginator.sortField==definition.id.toString().concat(',ASC')?'fa-sort-asc':vocabularyRecordsBean.paginator.sortField==definition.id.toString().concat(',DESC')?'fa-sort-desc':'fa-sort'}"/>
                                                <f:setPropertyActionListener
                                                        target="#{vocabularyRecordsBean.paginator.sortField}"
                                                        value="#{vocabularyRecordsBean.paginator.sortField==definition.id.toString().concat(',ASC')?definition.id.toString().concat(',DESC'):definition.id.toString().concat(',ASC')}"/>
                                                <f:ajax render="@form"/>
                                            </button>
                                        </th>

                                    </ui:repeat>
                                    <th class="gw-table-fixed__actions">
                                        <h:outputText value="#{msgs.auswahl}"/>
                                    </th>

                                </tr>
                                </thead>

                                <tbody>
                                <ui:repeat varStatus="status" var="record" value="#{vocabularyRecordsBean.paginator.items}">
                                    <ui:fragment rendered="#{record.shown}">
                                        <intranda:vocabularyRecordListEntry record="#{record}"/>
                                    </ui:fragment>
                                </ui:repeat>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- navigation buttons to flip through all records -->
                    <div class="box__actions">

                        <!-- add new record -->
                        <button jsf:id="new_record" jsf:action="#{vocabularyRecordsBean.createEmpty(null)}"
                                class="btn btn-primary me-auto"
                                title="#{msgs.vocabularyManager_addRecord}">
                            <span aria-hidden="true" class="fa fa-plus"/>
                            <span>
                                <h:outputText value="#{msgs.vocabularyManager_addRecord}"/>
                            </span>
                        </button>

                        <!-- Cancel (go back to vocab overview)-->
                        <button
                                class="btn btn-blank"
                                jsf:id="abbrechen"
                                jsf:type="cancel"
                                jsf:action="vocabulary_overview"
                                jsf:immediate="true">
                            <h:outputText value="#{msgs.vocabularyManager_backToVocabularies}"/>
                        </button>

                        <intranda:paginator id="record" paginator="#{vocabularyRecordsBean.paginator}"/>
                    </div> <!-- /box__actions -->
                </div>
            </h:panelGroup>
        </intranda:box>
    </composite:implementation>
</ui:composition>
